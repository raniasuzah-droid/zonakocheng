<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ZONA KOCHENG - VPS Custom</title>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#020617;
      --border:#1e293b;
      --text:#ffffff;
      --muted:rgba(255,255,255,.75);
      --green:#22c55e;
      --blue:#38bdf8;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:Inter,system-ui,Arial,sans-serif;
      color:var(--text);
      background: radial-gradient(900px 450px at 50% 0%, #1e293b 0%, var(--bg) 60%);
    }
    a{color:inherit}

    .topbar{
      position:sticky; top:0;
      z-index:10;
      background:rgba(2,6,23,.72);
      backdrop-filter: blur(10px);
      border-bottom:1px solid var(--border);
    }
    .topbar-inner{
      max-width:1100px;
      margin:auto;
      padding:14px 18px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
    }
    .brand{
      display:flex; align-items:center; gap:10px;
      text-decoration:none;
    }
    .logo{
      width:36px; height:36px;
      border-radius:10px;
      background:linear-gradient(135deg, var(--green), var(--blue));
      display:flex; align-items:center; justify-content:center;
      color:#00140a; font-weight:900;
    }
    .brand-title{line-height:1.1}
    .brand-title strong{display:block}
    .brand-title span{font-size:12px; opacity:.7}

    .actions{display:flex; gap:10px; flex-wrap:wrap; justify-content:flex-end}
    .btn{
      display:inline-flex; align-items:center; justify-content:center;
      padding:10px 14px;
      border-radius:12px;
      border:1px solid var(--border);
      text-decoration:none;
      font-weight:800;
      font-size:14px;
      cursor:pointer;
      user-select:none;
      transition:.2s;
      background:rgba(255,255,255,.04);
      color:var(--text);
    }
    .btn:hover{transform:translateY(-1px)}
    .btn.primary{background:var(--green); color:#00140a; border-color:transparent}

    .wrap{
      max-width:1100px;
      margin:auto;
      padding:26px 18px 70px;
    }

    .hero{
      border:1px solid var(--border);
      border-radius:18px;
      background:rgba(2,6,23,.55);
      padding:18px;
    }
    .hero h1{margin:0 0 6px; font-size:26px}
    .hero p{margin:0; color:var(--muted); line-height:1.5}

    .card{
      margin-top:14px;
      border:1px solid var(--border);
      border-radius:18px;
      background:rgba(2,6,23,.55);
      padding:18px;
    }

    .block{margin-bottom:18px}
    .label{
      display:flex;
      justify-content:space-between;
      gap:10px;
      margin-bottom:8px;
      font-weight:800;
    }
    .value{
      background:#1e293b;
      padding:6px 12px;
      border-radius:10px;
      font-size:13px;
      font-weight:900;
      white-space:nowrap;
    }
    input[type=range]{width:100%}

    .info{
      margin-top:6px;
      font-size:13px;
      color:#22c55e;
    }

    /* Toggle blocks */
    .togbox{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding:12px;
      border:1px solid var(--border);
      border-radius:14px;
      background:rgba(255,255,255,.04);
    }
    .togdesc{font-weight:900}
    .togmuted{font-size:12px; opacity:.75; line-height:1.35}

    .switch{
      position:relative;
      display:inline-block;
      width:54px;
      height:30px;
      flex:0 0 auto;
    }
    .switch input{opacity:0; width:0; height:0}
    .slider{
      position:absolute;
      cursor:pointer;
      inset:0;
      background:#1e293b;
      border:1px solid var(--border);
      transition:.2s;
      border-radius:999px;
    }
    .slider:before{
      position:absolute;
      content:"";
      height:22px; width:22px;
      left:4px; top:3px;
      background:#ffffff;
      transition:.2s;
      border-radius:50%;
    }
    .switch input:checked + .slider{
      background:rgba(34,197,94,.85);
      border-color:transparent;
    }
    .switch input:checked + .slider:before{
      transform:translateX(24px);
      background:#00140a;
    }

    .badge{
      display:inline-block;
      background:#0b1220;
      border:1px solid var(--border);
      border-radius:12px;
      padding:10px 12px;
      margin-top:6px;
      width:100%;
    }
    .small{
      font-size:13px;
      opacity:.85;
      line-height:1.45;
    }

    .price{
      margin-top:14px;
      font-size:24px;
      font-weight:900;
      text-align:center;
    }

    .order{
      width:100%;
      margin-top:14px;
      padding:16px;
      border:none;
      border-radius:14px;
      background:var(--green);
      color:#00140a;
      font-weight:900;
      font-size:16px;
      cursor:pointer;
    }
    .order:hover{opacity:.92}

    footer{
      margin-top:18px;
      text-align:center;
      opacity:.6;
      font-size:12px;
      padding:20px 0 0;
    }
  </style>
</head>

<body>
  <div class="topbar">
    <div class="topbar-inner">
      <a class="brand" href="index.html">
        <div class="logo">ZK</div>
        <div class="brand-title">
          <strong>ZONA KOCHENG</strong>
          <span>VPS Custom • Order via WhatsApp</span>
        </div>
      </a>

      <div class="actions">
        <a class="btn" href="index.html">Home</a>
        <a class="btn" href="vps-paket.html">VPS Paket</a>
        <a class="btn primary" href="https://wa.me/6283139274450" target="_blank" rel="noreferrer">Chat Admin</a>
      </div>
    </div>
  </div>

  <main class="wrap">
    <section class="hero">
      <h1>VPS Custom (Server Indonesia)</h1>
      <p>Pilih CPU, RAM, Disk sesukamu. Harga otomatis realtime. Klik order → langsung chat admin.</p>
    </section>

    <section class="card">

      <!-- OS / Windows RDP toggle -->
      <div class="block">
        <div class="label">
          <span>OS / Mode</span>
          <span class="value" id="osVal">Linux</span>
        </div>

        <div class="togbox">
          <div>
            <div class="togdesc">Windows RDP</div>
            <div class="togmuted">ON = Windows (RDP). OFF = VPS Linux.</div>
          </div>

          <label class="switch" title="Toggle Windows RDP">
            <input type="checkbox" id="rdpToggle" oninput="toggleRdp()">
            <span class="slider"></span>
          </label>
        </div>

        <div class="small" id="rdpNotice" style="margin-top:10px; display:none">
          Mode Windows RDP aktif. Minimal RAM mengikuti CPU. Disk minimal 30GB.
        </div>
      </div>

      <!-- Switch CPU toggle (untuk VPS + RDP) -->
      <div class="block" id="cpuSwitchBlock">
        <div class="label">
          <span>Switch CPU</span>
          <span class="value" id="cpuSwitchVal">OFF</span>
        </div>

        <div class="togbox">
          <div>
            <div class="togdesc">Switch CPU (stok)</div>
            <div class="togmuted">Jika CPU standar habis, admin akan me-switch CPU dan harga bisa berubah sesuai stok.</div>
          </div>

          <label class="switch" title="Toggle Switch CPU">
            <input type="checkbox" id="cpuSwitchToggle" oninput="updateAll()">
            <span class="slider"></span>
          </label>
        </div>
      </div>

      <!-- CPU -->
      <div class="block">
        <div class="label">
          <span>CPU</span>
          <span class="value"><span id="cpuVal">1</span> Core</span>
        </div>
        <input type="range" id="cpu" min="1" max="32" value="1" step="1" oninput="updateAll()">
      </div>

      <!-- RAM -->
      <div class="block">
        <div class="label">
          <span>RAM</span>
          <span class="value"><span id="ramVal">1</span> GB</span>
        </div>
        <input type="range" id="ram" min="1" max="128" value="1" step="1" oninput="updateAll()">
        <div class="info" id="ramInfo">Minimal RAM untuk CPU ini: 1 GB</div>
      </div>

      <!-- DISK -->
      <div class="block">
        <div class="label">
          <span>Disk</span>
          <span class="value"><span id="diskVal">20</span> GB</span>
        </div>
        <input type="range" id="disk" min="20" max="1000" step="10" value="20" oninput="updatePrice()">
      </div>

      <!-- BADGE + BREAKDOWN (JANGAN UBAH FORMAT) -->
      <div class="badge">
        <div class="small" id="breakdown">
          Paket dasar: Rp -<br>
          Upgrade RAM: Rp -<br>
          Upgrade Disk: Rp -<br>
          Biaya layanan: Rp 5.000
        </div>
      </div>

      <div class="price" id="price">Total: Rp - / 30 hari</div>

      <button class="order" onclick="orderWA()">ORDER VIA WHATSAPP</button>

    </section>

    <footer>© 2025 ZONA KOCHENG • kalinux.cloud</footer>
  </main>

<script>
/* =========================
   CONFIG (UBAH DI SINI)
   ========================= */
const WA_NUMBER = "6283139274450";

/* NOTE: breakdown harus tetap menampilkan 'Biaya layanan: Rp 5.000' */
const SERVICE_FEE = 5000;

/* FINAL RATE (tidak ditampilkan di breakdown) */
const VPS_MARKUP = 0.05; // VPS Linux 13%
const RDP_MARKUP = 0.08; // Windows RDP 15% (11% + 4%)

/* =========================
   Helpers
   ========================= */
function formatIDR(n){ return n.toLocaleString("id-ID"); }
function diskExtraPriceCommon(disk, baseDisk){
  const diff = Math.max(0, disk - baseDisk);
  return diff * 1000 + Math.round(diff / 1000);
}
function applyMarkupToParts(base, ramExtra, diskExtra, markup){
  const rawSubtotal = base + ramExtra + diskExtra;
  if(rawSubtotal <= 0) return { base:0, ramExtra:0, diskExtra:0, subtotal:0 };

  const markedSubtotal = Math.round(rawSubtotal * (1 + markup));
  const scale = markedSubtotal / rawSubtotal;

  let b = Math.round(base * scale);
  let r = Math.round(ramExtra * scale);
  let d = Math.round(diskExtra * scale);

  let diff = markedSubtotal - (b + r + d);
  d += diff;

  return { base:b, ramExtra:r, diskExtra:d, subtotal:markedSubtotal };
}
function scalePartsToSubtotal(base, ramExtra, diskExtra, targetSubtotal){
  const rawSubtotal = base + ramExtra + diskExtra;
  if(rawSubtotal <= 0){
    return { base:0, ramExtra:0, diskExtra:targetSubtotal, subtotal:targetSubtotal };
  }
  const scale = targetSubtotal / rawSubtotal;

  let b = Math.round(base * scale);
  let r = Math.round(ramExtra * scale);
  let d = Math.round(diskExtra * scale);

  let diff = targetSubtotal - (b + r + d);
  d += diff;

  return { base:b, ramExtra:r, diskExtra:d, subtotal:targetSubtotal };
}

/* =========================
   VPS LINUX
   ========================= */
const LINUX_RAM_PER_GB = 2000;

/* Standard anchors */
const LINUX_STD_C1 = 57000;   // C1 R1 D20
const LINUX_STD_C5 = 107000;  // C5 R2 D20
const LINUX_STD_C9 = 167000;  // C9 R16 D20

/* Switch CPU ON anchors (kamu kasih - UPDATE) */
const LINUX_SWC_C1  = 60000;   // C1 R1 D20
const LINUX_SWC_C2  = 75000;   // C2 R2 D20
const LINUX_SWC_C5  = 114000;  // C5 R2 D20
const LINUX_SWC_C6  = 135000;  // C6 R6 D20
const LINUX_SWC_C8  = 161000;  // C8 R6 D20
const LINUX_SWC_C9  = 195000;  // C9 R16 D20
const LINUX_SWC_C32 = 493000;  // C32 R16 D20

function minRamLinux(cpu){
  if(cpu === 1) return 1;
  if(cpu >= 2 && cpu <= 5) return 2;
  if(cpu >= 6 && cpu <= 8) return 6;
  return 16;
}
function baseForCpuLinuxStandard(cpu){
  if(cpu >= 1 && cpu <= 5){
    const step = (LINUX_STD_C5 - LINUX_STD_C1) / 4;
    return Math.round(LINUX_STD_C1 + (cpu - 1) * step);
  }
  if(cpu >= 6 && cpu <= 8){
    return LINUX_STD_C5 + (cpu - 5) * 10000;
  }
  return LINUX_STD_C9 + (cpu - 9) * 10000;
}
function baseForCpuLinuxSwitch(cpu){
  // UPDATE: switch CPU mode juga support CPU 1 (sesuai list kamu)
  if(cpu === 1) return LINUX_SWC_C1;

  if(cpu <= 5){
    // cpu2..5: linear dari 75k -> 114k
    const step = (LINUX_SWC_C5 - LINUX_SWC_C2) / 3;
    return Math.round(LINUX_SWC_C2 + (cpu - 2) * step);
  }
  if(cpu <= 8){
    // cpu6..8: linear dari 135k -> 161k
    const step = (LINUX_SWC_C8 - LINUX_SWC_C6) / 2;
    return Math.round(LINUX_SWC_C6 + (cpu - 6) * step);
  }
  // cpu9..32: linear dari 195k -> 493k
  const step = (LINUX_SWC_C32 - LINUX_SWC_C9) / (32 - 9);
  return Math.round(LINUX_SWC_C9 + (cpu - 9) * step);
}

/* Modal override (Switch CPU ON) untuk spek tertentu biar akurat sesuai list kamu */
const LINUX_MODAL_SWC = new Map([
  ["1-1-20",      60000],
  ["2-2-20",      75000],
  ["5-2-20",     114000],
  ["6-6-20",     135000],
  ["8-6-20",     161000],
  ["9-16-20",    195000],
  ["32-16-20",   493000],
  ["2-128-20",   314000],
  ["2-2-1000",  1041000],
  ["32-128-1000",1698000],
]);
function computeLinuxFinal(cpu, ram, disk, switchOn){
  const min = minRamLinux(cpu);
  const base0 = switchOn ? baseForCpuLinuxSwitch(cpu) : baseForCpuLinuxStandard(cpu);
  const ramExtra0 = Math.max(0, ram - min) * LINUX_RAM_PER_GB;
  const diskExtra0 = diskExtraPriceCommon(disk, 20);

  // Modal override hanya saat Switch CPU ON dan spek match list kamu
  let basePre = base0, ramPre = ramExtra0, diskPre = diskExtra0;

  if(switchOn){
    const key = `${cpu}-${ram}-${disk}`;
    const modalSubtotal = LINUX_MODAL_SWC.get(key);
    if(typeof modalSubtotal === "number"){
      const scaled = scalePartsToSubtotal(base0, ramExtra0, diskExtra0, modalSubtotal);
      basePre = scaled.base;
      ramPre  = scaled.ramExtra;
      diskPre = scaled.diskExtra;
    }
  }

  // markup 13% disembunyikan: breakdown menampilkan angka final setelah markup
  const parts = applyMarkupToParts(basePre, ramPre, diskPre, VPS_MARKUP);
  const total = parts.subtotal + SERVICE_FEE;

  return { ...parts, total, min };
}

/* =========================
   WINDOWS RDP (CPU 2-32 tidak loncat)
   ========================= */
const RDP_RAM_PER_GB = 2000;

function minRamRdp(cpu){
  if(cpu >= 2 && cpu <= 5) return 2;
  if(cpu >= 6 && cpu <= 8) return 6;
  return 16;
}
const RDP_STD = { perCore: 10000, baseCpu2:  79000, baseCpu6: 127000, baseCpu9: 177000 };
const RDP_SWC = { perCore: 13000, baseCpu2:  85000, baseCpu6: 145000, baseCpu9: 204000 };

function rdpBaseForCpu(cpu, switchOn){
  const cfg = switchOn ? RDP_SWC : RDP_STD;
  if(cpu <= 5){
    return cfg.baseCpu2 + Math.max(0, cpu - 2) * cfg.perCore;
  }
  if(cpu <= 8){
    return cfg.baseCpu6 + (cpu - 6) * cfg.perCore;
  }
  return cfg.baseCpu9 + (cpu - 9) * cfg.perCore;
}

const RDP_MODAL_STD = new Map([
  ["2-2-30",    79000],
  ["5-2-30",   109000],
  ["6-6-30",   127000],
  ["8-6-30",   147000],
  ["9-16-30",  177000],
  ["32-16-30", 407000],
  ["2-128-30", 331000],
  ["2-2-1000", 1055000],
  ["32-128-1000", 1602000],
]);

const RDP_MODAL_SWC = new Map([
  ["2-2-30",     85000],
  ["5-2-30",    124000],
  ["6-6-30",    145000],
  ["8-6-30",    171000],
  ["9-16-30",   204000],
  ["32-16-30",  503000],
  ["2-128-30",  337000],
  ["2-2-1000",  1056000],
  ["32-128-1000", 1698000],
]);

function computeRdpFinal(cpu, ram, disk, switchOn){
  const min = minRamRdp(cpu);

  const base0 = rdpBaseForCpu(cpu, switchOn);
  const ramExtra0 = Math.max(0, ram - min) * RDP_RAM_PER_GB;
  const diskExtra0 = diskExtraPriceCommon(disk, 30);

  const key = `${cpu}-${ram}-${disk}`;
  const modalMap = switchOn ? RDP_MODAL_SWC : RDP_MODAL_STD;
  const modalSubtotal = modalMap.get(key);

  let partsPre = { base: base0, ramExtra: ramExtra0, diskExtra: diskExtra0, subtotal: base0 + ramExtra0 + diskExtra0 };
  if(typeof modalSubtotal === "number"){
    partsPre = scalePartsToSubtotal(base0, ramExtra0, diskExtra0, modalSubtotal);
  }

  const parts = applyMarkupToParts(partsPre.base, partsPre.ramExtra, partsPre.diskExtra, RDP_MARKUP);
  const total = parts.subtotal + SERVICE_FEE;

  return { ...parts, total, min };
}

/* =========================
   UI
   ========================= */
const cpuEl = document.getElementById("cpu");
const ramEl = document.getElementById("ram");
const diskEl = document.getElementById("disk");

const cpuVal = document.getElementById("cpuVal");
const ramVal = document.getElementById("ramVal");
const diskVal = document.getElementById("diskVal");

const ramInfo = document.getElementById("ramInfo");
const breakdown = document.getElementById("breakdown");
const priceEl = document.getElementById("price");

const rdpToggle = document.getElementById("rdpToggle");
const osVal = document.getElementById("osVal");
const rdpNotice = document.getElementById("rdpNotice");

const cpuSwitchToggle = document.getElementById("cpuSwitchToggle");
const cpuSwitchVal = document.getElementById("cpuSwitchVal");

function isRdpMode(){ return !!(rdpToggle && rdpToggle.checked); }
function isCpuSwitchOn(){ return !!(cpuSwitchToggle && cpuSwitchToggle.checked); }

function toggleRdp(){
  const on = isRdpMode();
  osVal.textContent = on ? "Windows RDP" : "Linux";
  rdpNotice.style.display = on ? "block" : "none";

  // reset minimum disk display
  if(on){
    if(parseInt(cpuEl.value,10) < 2) cpuEl.value = "2";
    if(parseInt(diskEl.value,10) < 30) diskEl.value = "30";
  }else{
    if(parseInt(diskEl.value,10) < 20) diskEl.value = "20";
  }
  updateAll();
}

function updateAll(){
  cpuSwitchVal.textContent = isCpuSwitchOn() ? "ON" : "OFF";

  // enforce minimums
  if(isRdpMode()){
    if(parseInt(cpuEl.value,10) < 2) cpuEl.value = "2";
    if(parseInt(diskEl.value,10) < 30) diskEl.value = "30";

    const min = minRamRdp(parseInt(cpuEl.value,10));
    ramEl.min = String(min);
    if(parseInt(ramEl.value,10) < min) ramEl.value = String(min);
    ramInfo.textContent = "Minimal RAM untuk CPU ini: " + min + " GB";
  }else{
    // Linux: Switch CPU ON juga support CPU 1 (sesuai list update)
    // jadi tidak dipaksa minimal 2.
    if(parseInt(diskEl.value,10) < 20) diskEl.value = "20";

    const min = minRamLinux(parseInt(cpuEl.value,10));
    ramEl.min = String(min);
    if(parseInt(ramEl.value,10) < min) ramEl.value = String(min);
    ramInfo.textContent = "Minimal RAM untuk CPU ini: " + min + " GB";
  }

  cpuVal.textContent = cpuEl.value;
  ramVal.textContent = ramEl.value;
  diskVal.textContent = diskEl.value;

  updatePrice();
}

function updatePrice(){
  const cpu = parseInt(cpuEl.value,10);
  const ram = parseInt(ramEl.value,10);
  const disk= parseInt(diskEl.value,10);

  if(isRdpMode()){
    const min = minRamRdp(cpu);
    if(ram < min) ramEl.value = String(min);
    if(disk < 30) diskEl.value = "30";

    const p = computeRdpFinal(parseInt(cpuEl.value,10), parseInt(ramEl.value,10), parseInt(diskEl.value,10), isCpuSwitchOn());

    breakdown.innerHTML =
      "Paket dasar: Rp " + formatIDR(p.base) + "<br>" +
      "Upgrade RAM: Rp " + formatIDR(p.ramExtra) + "<br>" +
      "Upgrade Disk: Rp " + formatIDR(p.diskExtra) + "<br>" +
      "Biaya layanan: Rp 5.000";

    priceEl.textContent = "Total: Rp " + formatIDR(p.total) + " / 30 hari";
  } else {
    // Linux: switch ON tidak memaksa CPU ke 2 (CPU 1 juga valid)

    const p = computeLinuxFinal(parseInt(cpuEl.value,10), parseInt(ramEl.value,10), parseInt(diskEl.value,10), isCpuSwitchOn());

    breakdown.innerHTML =
      "Paket dasar: Rp " + formatIDR(p.base) + "<br>" +
      "Upgrade RAM: Rp " + formatIDR(p.ramExtra) + "<br>" +
      "Upgrade Disk: Rp " + formatIDR(p.diskExtra) + "<br>" +
      "Biaya layanan: Rp 5.000";

    priceEl.textContent = "Total: Rp " + formatIDR(p.total) + " / 30 hari";
  }

  cpuVal.textContent = cpuEl.value;
  ramVal.textContent = ramEl.value;
  diskVal.textContent = diskEl.value;
  cpuSwitchVal.textContent = isCpuSwitchOn() ? "ON" : "OFF";
}

function orderWA(){
  const osText = isRdpMode() ? "Windows RDP" : "Linux";
  const cpu  = parseInt(cpuEl.value,10);
  const ram  = parseInt(ramEl.value,10);
  const disk = parseInt(diskEl.value,10);

  let totalText = "-";
  if(isRdpMode()){
    const p = computeRdpFinal(cpu, ram, disk, isCpuSwitchOn());
    totalText = "Rp " + formatIDR(p.total) + " / 30 hari";
  }else{
    const p = computeLinuxFinal(cpu, ram, disk, isCpuSwitchOn());
    totalText = "Rp " + formatIDR(p.total) + " / 30 hari";
  }

  const msg =
`Halo admin ZONA KOCHENG,
Saya mau order VPS Custom:

OS   : ${osText}
Switch CPU : ${isCpuSwitchOn() ? "ON" : "OFF"}
CPU  : ${cpu} Core
RAM  : ${ram} GB
Disk : ${disk} GB

Harga: ${totalText}

Catatan: Jika CPU standar habis, admin akan me-switch CPU & harga bisa berubah sesuai stok.

Nama:
Kebutuhan (RDP/Hosting/Bot/dll):
Lokasi: Indonesia`;

  window.open("https://wa.me/" + WA_NUMBER + "?text=" + encodeURIComponent(msg), "_blank");
}

updateAll();
</script>

</body>
</html>
